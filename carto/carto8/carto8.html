<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Responsive iframe</title>

    <link rel="stylesheet" type="text/css" href="carto8.css">


  </head>

  <body>
  
    <div class="container">
      <div class="row">
        <section>
          <div class="region">





            <p>C'est l'histoire du blabla qui veut s'intégrer dans la communauté du blabla. Blabla porte le lourd fardeau d'être une balise iframe. Totalement reclu de la société, blabla est très triste et trop isolé..</p>
            <p><iframe id="onpv_graph1" name="onpv_graph1" src="../../onpv/graph1/onpv_graph1.html"></iframe></p>       
            <p>Le blabla continue son bout de chemin...</p>
            <p>Il trouve enfin son pote ! Abracadabra ! Blabla et Abracadabra se ressemblent sur un point unique : la balise iframe.</p>
            <p><iframe id="onpv_graph2" name="onpv_graph2" src="../../onpv/graph2/onpv_graph2.html"></iframe></p>
            <p>Et un dernier pour la route, une iframe de toute beauté, crée de toute pièce par Abracadra, après un long monologue de Blabla, le voici : l'iframe Alibaba ! (selon des croyances, trésor tu trouveras).</p>
            <p><iframe id="onpv_graph3" name="onpv_graph3" src="../../onpv/graph3/onpv_graph3.html"></iframe></p>

           </div>
        </section>
      </div>
    </div>




    <script>



     window.addEventListener("message", function(e){

       switch(e.source){
        case window.frames.onpv_graph1:
          heightIframe(e,"#onpv_graph1");
            break;
        case window.frames.onpv_graph2:
          heightIframe(e,"#onpv_graph2");
            break;
        case window.frames.onpv_graph3:
          heightIframe(e,"#onpv_graph3");
            break;
       }
    });

    function heightIframe (event,id) {
      if ((typeof event.data === "string") && (event.data.indexOf("documentHeight")>-1)){
                let height = event.data.split("documentHeight:")[1]
                height = parseInt(height) + 50;
                document.querySelector(id).height = `${height} px`;
      }
    }



    </script>



  </body>
</html>
